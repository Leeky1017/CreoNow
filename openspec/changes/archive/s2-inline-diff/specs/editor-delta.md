# Editor Specification Delta

## Change: s2-inline-diff

### Requirement: Inline Diff 标注与接受/拒绝控制 [ADDED]

系统必须将 AI 修改结果以 inline diff 形式展示，并提供接受/拒绝控制按钮，确保正文仅在用户确认后被应用。

- diff 标注必须区分新增与删除片段。
- 控制按钮必须支持“接受”和“拒绝”两种动作。
- 未确认前不得覆盖原始编辑内容。

#### Scenario: AI 输出后展示 inline diff 标注 [ADDED]

- **假设** 用户触发 AI 改写并收到修改结果
- **当** 系统进入差异展示态
- **则** 编辑区展示新增/删除的 inline diff decoration
- **并且** 每个可操作差异显示接受/拒绝控制

#### Scenario: 用户接受差异后应用到编辑器 [ADDED]

- **假设** 当前差异处于可操作状态
- **当** 用户点击“接受”
- **则** 对应差异被应用到编辑器正文
- **并且** 已接受差异的控制项从当前视图移除

#### Scenario: 用户拒绝差异后保留原文 [ADDED]

- **假设** 当前差异处于可操作状态
- **当** 用户点击“拒绝”
- **则** 对应差异不写入正文
- **并且** 编辑器保留该片段的原始内容
