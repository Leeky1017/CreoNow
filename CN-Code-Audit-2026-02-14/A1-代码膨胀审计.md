# [A1ä»£ç è†¨èƒ€å®¡è®¡å‘˜] å®¡è®¡æŠ¥å‘Š

## å®¡è®¡æ‘˜è¦
- æ‰«ææ–‡ä»¶æ•°ï¼š666
- å‘ç°é—®é¢˜æ€»æ•°ï¼š10
- ä¸¥é‡ï¼ˆCriticalï¼‰ï¼š0 | é«˜å±ï¼ˆHighï¼‰ï¼š4 | ä¸­å±ï¼ˆMediumï¼‰ï¼š4 | ä½å±ï¼ˆLowï¼‰ï¼š2

## ğŸ”´ ä¸¥é‡é—®é¢˜ï¼ˆCriticalï¼‰
- æœ¬è½®æœªå‘ç° Critical çº§åˆ«é—®é¢˜ã€‚

## ğŸŸ  é«˜å±é—®é¢˜ï¼ˆHighï¼‰
### [A1-H-001] è®¾ç½®è´¦æˆ·æ“ä½œå…¥å£ä¸ºåƒµå°¸ä»£ç 
- æ–‡ä»¶ï¼š`apps/desktop/renderer/src/features/settings-dialog/SettingsDialog.tsx`
- è¡Œå·/èŒƒå›´ï¼šL195-L203
- é—®é¢˜ç±»å‹ï¼šæ­»ä»£ç /åƒµå°¸ä»£ç ï¼ˆç©ºå®ç°å ä½ï¼‰
- æè¿°ï¼šè´¦æˆ·æ“ä½œå›è°ƒæ˜¯ç©ºå‡½æ•°ä½“ï¼Œä»…ä¿ç•™ TODOï¼Œå ä½é€»è¾‘å·²è¿›å…¥ä¸»è·¯å¾„ UIã€‚
- ä»£ç ç‰‡æ®µï¼š
```tsx
<SettingsAccount
  account={accountSettings}
  onUpgrade={() => {
    // TODO: Implement upgrade flow when account system is ready
  }}
  onDeleteAccount={() => {
    // TODO: Implement delete account when account system is ready
  }}
/>
```
- é£é™©ï¼šç”¨æˆ·è§¦å‘å…³é”®æ“ä½œæ— æ•ˆæœï¼Œå½¢æˆâ€œå¯ç‚¹å‡»ä½†æ— è¡Œä¸ºâ€çš„åƒµå°¸å…¥å£ã€‚
- å»ºè®®ä¿®å¤ï¼šç§»å‡ºä¸»è·¯å¾„æˆ–æ˜¾å¼ç¦ç”¨å…¥å£ï¼›æœªå®ç°å‰è¿”å›å¯è§‚æµ‹é”™è¯¯çŠ¶æ€å¹¶è®°å½•ã€‚
- ä¼˜å…ˆçº§ï¼šP0

### [A1-H-002] Version ç±»å‹å®šä¹‰é‡å¤é“¾è·¯
- æ–‡ä»¶ï¼š`apps/desktop/renderer/src/features/version-history/VersionHistoryContainer.tsx`
- è¡Œå·/èŒƒå›´ï¼šL17-L24
- é—®é¢˜ç±»å‹ï¼šé‡å¤é“¾è·¯/å†—ä½™é€»è¾‘ï¼ˆé‡å¤ç±»å‹å®šä¹‰ï¼‰
- æè¿°ï¼š`VersionListItem` åœ¨å®¹å™¨å±‚å’Œ store å±‚é‡å¤å®šä¹‰ï¼Œç»“æ„ä¸€è‡´ï¼Œå­˜åœ¨æ¼‚ç§»é£é™©ã€‚
- ä»£ç ç‰‡æ®µï¼š
```ts
type VersionListItem = {
  versionId: string;
  actor: "user" | "auto" | "ai";
  reason: string;
  contentHash: string;
  wordCount: number;
  createdAt: number;
};
```
- é£é™©ï¼šä»»ä¸€ä¾§å­—æ®µå˜æ›´ä¼šå‡ºç°â€œç¼–è¯‘å¯è¿‡ä½†è¿è¡Œå¥‘çº¦ä¸ä¸€è‡´â€ã€‚
- å»ºè®®ä¿®å¤ï¼šæ”¶æ•›åˆ°å•ä¸€ç±»å‹æºå¹¶ç»Ÿä¸€å¼•ç”¨ã€‚
- ä¼˜å…ˆçº§ï¼šP1

### [A1-H-003] Judge æ¨¡å‹ç¡®ä¿æµç¨‹åŒå®ç°
- æ–‡ä»¶ï¼š`apps/desktop/renderer/src/features/settings/JudgeSection.tsx`
- è¡Œå·/èŒƒå›´ï¼šL49-L70
- é—®é¢˜ç±»å‹ï¼šé‡å¤é“¾è·¯/å†—ä½™é€»è¾‘ï¼ˆåŒä¸€ä¸šåŠ¡æµåŒå®ç°ï¼‰
- æè¿°ï¼š`judge:model:ensure` çš„çŠ¶æ€æœºï¼ˆbusyã€é˜²é‡å…¥ã€downloadingã€error æ˜ å°„ï¼‰åœ¨ä¸¤ä¸ªæ¨¡å—é‡å¤å®ç°ã€‚
- ä»£ç ç‰‡æ®µï¼š
```ts
if (ensureBusy) {
  return;
}
setEnsureBusy(true);
setJudgeError(null);
setJudgeState({ status: "downloading" });

try {
  const res = await invoke("judge:model:ensure", {});
```
- é£é™©ï¼šåç»­ä¿®å¤/å¢å¼ºå¾ˆå®¹æ˜“åªæ”¹ä¸€å¤„ï¼Œå¯¼è‡´ UI è¡Œä¸ºä¸ä¸€è‡´ã€‚
- å»ºè®®ä¿®å¤ï¼šæŠ½æˆå…±äº« hook/æœåŠ¡ï¼Œç»Ÿä¸€é”™è¯¯æ˜ å°„ä¸çŠ¶æ€è¿ç§»ã€‚
- ä¼˜å…ˆçº§ï¼šP1

### [A1-H-004] VersionHistory å›ºå®šå ä½å­—æ®µé•¿æœŸå­˜åœ¨
- æ–‡ä»¶ï¼š`apps/desktop/renderer/src/features/version-history/VersionHistoryContainer.tsx`
- è¡Œå·/èŒƒå›´ï¼šL154-L161
- é—®é¢˜ç±»å‹ï¼šæ­»ä»£ç /åƒµå°¸é€»è¾‘ï¼ˆç¡¬ç¼–ç å ä½ï¼‰
- æè¿°ï¼š`wordChange` å›ºå®šä¸º `none/0`ï¼Œå¹¶å¸¦ TODOï¼Œå¯¼è‡´å­—æ®µé•¿æœŸæ— çœŸå®è¯­ä¹‰ã€‚
- ä»£ç ç‰‡æ®µï¼š
```ts
const entry: VersionEntry = {
  id: item.versionId,
  timestamp: formatTimestamp(item.createdAt),
  authorType: mapActorToAuthorType(item.actor),
  authorName: getAuthorName(item.actor),
  description: getDescription(item.reason),
  wordChange: { type: "none", count: 0 }, // TODO: calculate actual word diff
```
- é£é™©ï¼šä¸‹æ¸¸ UI/åˆ†æä¾èµ–è¯¥å­—æ®µæ—¶ä¼šå¾—åˆ°ç³»ç»Ÿæ€§é”™è¯¯ä¿¡æ¯ã€‚
- å»ºè®®ä¿®å¤ï¼šå®ç°çœŸå® diff æˆ–åœ¨å¥‘çº¦å±‚ç§»é™¤è¯¥å­—æ®µç›´åˆ°å¯ç”¨ã€‚
- ä¼˜å…ˆçº§ï¼šP1

## ğŸŸ¡ ä¸­å±é—®é¢˜ï¼ˆMediumï¼‰
### [A1-M-001] æ¼”ç¤ºå‚æ•°ä¾µå…¥ç”Ÿäº§ç»„ä»¶
- æ–‡ä»¶ï¼š`apps/desktop/renderer/src/components/features/AiDialogs/AiInlineConfirm.tsx`
- è¡Œå·/èŒƒå›´ï¼šL263-L274
- é—®é¢˜ç±»å‹ï¼šè¾…åŠ©å‡½æ•°æ»¥ç”¨/è¿‡åº¦æŠ½è±¡
- æè¿°ï¼š`simulateDelay`/`initialState` ç­‰æ¼”ç¤ºå‚æ•°è¿›å…¥æ­£å¼ç»„ä»¶è¡Œä¸ºè·¯å¾„ã€‚
- ä»£ç ç‰‡æ®µï¼š
```tsx
initialState = "pending",
simulateDelay = 800,
...
await new Promise((resolve) => setTimeout(resolve, simulateDelay));
```
- é£é™©ï¼šç”Ÿäº§äº¤äº’è¢«äººä¸ºå»¶è¿Ÿå‚æ•°æ±¡æŸ“ï¼Œå¢åŠ è¡Œä¸ºä¸ç¡®å®šæ€§ä¸æµ‹è¯•å¤æ‚åº¦ã€‚
- å»ºè®®ä¿®å¤ï¼šå°† demo æ§åˆ¶ä¸‹æ²‰åˆ° stories/fixturesï¼Œç”Ÿäº§ç»„ä»¶åªä¿ç•™ä¸šåŠ¡å‚æ•°ã€‚
- ä¼˜å…ˆçº§ï¼šP2

### [A1-M-002] ErrorCard å†…ç½®é‡è¯•æˆåŠŸå¼€å…³
- æ–‡ä»¶ï¼š`apps/desktop/renderer/src/components/features/AiDialogs/AiErrorCard.tsx`
- è¡Œå·/èŒƒå›´ï¼šL532-L535, L616-L621
- é—®é¢˜ç±»å‹ï¼šè¾…åŠ©å‡½æ•°æ»¥ç”¨/è¿‡åº¦æŠ½è±¡
- æè¿°ï¼š`retryWillSucceed` åœ¨ç”Ÿäº§ç»„ä»¶å†…æ§åˆ¶é‡è¯•ç»“æœï¼Œå±äºæµ‹è¯•/æ¼”ç¤ºåˆ†æ”¯å¤–æ³„ã€‚
- ä»£ç ç‰‡æ®µï¼š
```tsx
simulateDelay = 1500,
retryWillSucceed = true,
...
await new Promise((resolve) => setTimeout(resolve, simulateDelay));
if (retryWillSucceed) {
  setRetryState("success");
```
- é£é™©ï¼šçœŸå®é”™è¯¯å¤„ç†è·¯å¾„è¢«ä¼ªåˆ†æ”¯è¦†ç›–ï¼Œçº¿ä¸Šè¡Œä¸ºä¸çœŸå®åç«¯è„±èŠ‚ã€‚
- å»ºè®®ä¿®å¤ï¼šå°†ç»“æœæ³¨å…¥æ”¹ä¸ºå¤–éƒ¨å›è°ƒç»“æœï¼Œä¸åœ¨ç»„ä»¶å†…éƒ¨ç¡¬ç¼–ç æˆåŠŸå¼€å…³ã€‚
- ä¼˜å…ˆçº§ï¼šP2

### [A1-M-003] Barrel æ–‡ä»¶æ³¨é‡Šæ¨¡æ¿åŒ–å †å 
- æ–‡ä»¶ï¼š`apps/desktop/renderer/src/components/features/AiDialogs/index.ts`
- è¡Œå·/èŒƒå›´ï¼šL1-L41
- é—®é¢˜ç±»å‹ï¼šæ³¨é‡Šæ³›æ»¥
- æè¿°ï¼šbarrel æ–‡ä»¶å«å¤§æ®µè¯´æ˜ä¸ç¤ºä¾‹ï¼Œä¿¡æ¯å¯†åº¦ä½ä¸”ç»´æŠ¤æˆæœ¬é«˜ã€‚
- ä»£ç ç‰‡æ®µï¼š
```ts
/**
 * AI Dialogs - Components for AI interaction and system feedback
 * ...
 * @example
 * ```tsx
 * import { AiInlineConfirm, AiDiffModal, AiErrorCard, SystemDialog } ...
```
- é£é™©ï¼šæ–‡æ¡£ä¸çœŸå®å¯¼å‡ºæ¼‚ç§»æ—¶è¯¯å¯¼è°ƒç”¨æ–¹ï¼Œå¢åŠ å®¡é˜…å™ªéŸ³ã€‚
- å»ºè®®ä¿®å¤ï¼šbarrel æ–‡ä»¶ä¿ç•™æœ€å°æ³¨é‡Šï¼Œç¤ºä¾‹è¿ç§»è‡³ Storybook/ç‹¬ç«‹æ–‡æ¡£ã€‚
- ä¼˜å…ˆçº§ï¼šP2

### [A1-M-004] ä¸€è¡Œè½¬å‘åŒ…è£…å‡½æ•°
- æ–‡ä»¶ï¼š`apps/desktop/main/src/services/kg/kgRecognitionRuntime.ts`
- è¡Œå·/èŒƒå›´ï¼šL275-L277
- é—®é¢˜ç±»å‹ï¼šè¾…åŠ©å‡½æ•°æ»¥ç”¨/è¿‡åº¦æŠ½è±¡
- æè¿°ï¼š`service()` ä»…è½¬å‘ `createKnowledgeGraphService(...)`ï¼Œå¢åŠ æ— æ”¶ç›Šä¸­é—´å±‚ã€‚
- ä»£ç ç‰‡æ®µï¼š
```ts
function service() {
  return createKnowledgeGraphService({ db: args.db, logger: args.logger });
}
```
- é£é™©ï¼šè°ƒç”¨æ ˆä¸é˜…è¯»è·¯å¾„å˜é•¿ï¼Œåç»­é‡æ„æ˜“å½¢æˆæ›´å¤šåŒ…è£…å åŠ ã€‚
- å»ºè®®ä¿®å¤ï¼šç›´æ¥æ³¨å…¥æˆ–ç¼“å­˜ service å®ä¾‹ï¼Œå»é™¤ä¸€æ¬¡æ€§è½¬å‘å‡½æ•°ã€‚
- ä¼˜å…ˆçº§ï¼šP2

## ğŸ”µ ä½å±é—®é¢˜ï¼ˆLowï¼‰
### [A1-L-001] æœªä½¿ç”¨å‚æ•°å ä½
- æ–‡ä»¶ï¼š`apps/desktop/renderer/src/features/outline/OutlinePanel.tsx`
- è¡Œå·/èŒƒå›´ï¼šL602-L604
- é—®é¢˜ç±»å‹ï¼šæ­»ä»£ç /åƒµå°¸ä»£ç 
- æè¿°ï¼š`onScrollSync` ä»…ä»¥ `_onScrollSync` å ä½å¹¶å…³é—­ lintï¼Œå½“å‰æ— å®é™…è°ƒç”¨ã€‚
- ä»£ç ç‰‡æ®µï¼š
```tsx
// onScrollSync is provided for future editor integration
// eslint-disable-next-line @typescript-eslint/no-unused-vars
onScrollSync: _onScrollSync,
```
- é£é™©ï¼šæ¥å£é¢è†¨èƒ€ï¼Œè°ƒç”¨æ–¹è¯¯ä»¥ä¸ºè¯¥èƒ½åŠ›å·²ç”Ÿæ•ˆã€‚
- å»ºè®®ä¿®å¤ï¼šè‹¥æœªä¸Šçº¿åˆ™ä» props ç§»é™¤ï¼›è‹¥ä¿ç•™éœ€è¡¥æœ€å°å¯ç”¨è¡Œä¸ºä¸æµ‹è¯•ã€‚
- ä¼˜å…ˆçº§ï¼šP3

### [A1-L-002] Deprecated è·¯å¾„ç–‘ä¼¼é•¿æœŸåŒè½¨
- æ–‡ä»¶ï¼š`apps/desktop/renderer/src/features/quality-gates/QualityGatesPanel.tsx`
- è¡Œå·/èŒƒå›´ï¼šL283-L287
- é—®é¢˜ç±»å‹ï¼šæ­»ä»£ç /åƒµå°¸ä»£ç ï¼ˆç–‘ä¼¼ï¼‰
- æè¿°ï¼šæ ‡æ³¨ `@deprecated` çš„ standalone å®¹å™¨æ ·å¼ä»åœ¨ä¸»æ–‡ä»¶æŒç»­ç»´æŠ¤ã€‚
- ä»£ç ç‰‡æ®µï¼š
```ts
/**
 * Legacy panel styles - includes container styles for standalone use.
 * @deprecated Use QualityGatesPanelContent with layout containers instead.
 */
const panelStyles = [
```
- é£é™©ï¼šé•¿æœŸåŒè½¨å®ç°å¢åŠ ç»´æŠ¤é¢ï¼Œå®¹æ˜“å¼•å…¥æ ·å¼/è¡Œä¸ºæ¼‚ç§»ã€‚
- å»ºè®®ä¿®å¤ï¼šç¡®è®¤è°ƒç”¨é¢åä¸‹çº¿ deprecated è·¯å¾„ï¼Œä»…ä¿ç•™ content ç»„ä»¶ã€‚
- ä¼˜å…ˆçº§ï¼šP3

## æ¨¡å¼ç»Ÿè®¡
- æ³¨é‡Šå¯†åº¦â‰¥30% çš„æ–‡ä»¶ï¼š39
- `TODO:` å‘½ä¸­ï¼š4
- `@deprecated` å‘½ä¸­ï¼š3
- è£…é¥°æ€§åˆ†éš”æ³¨é‡Šï¼ˆ`// ===...`ï¼‰å‘½ä¸­ï¼š1047
- ç”Ÿäº§ä»£ç ä¸­â€œæ¼”ç¤ºæ§åˆ¶å‚æ•°â€ï¼ˆ`simulateDelay/retryWillSucceed/...`ï¼‰å‘½ä¸­ï¼š30
- é test/story çš„é‡å¤ç±»å‹å‘½åï¼ˆåŒå type/interfaceï¼‰å‘½ä¸­ï¼š41
- å·²ç¡®è®¤åƒµå°¸å‚æ•°ï¼š1
- å·²ç¡®è®¤é‡å¤ä¸šåŠ¡é“¾è·¯ï¼š2
