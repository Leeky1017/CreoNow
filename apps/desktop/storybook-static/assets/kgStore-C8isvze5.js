import{j as b}from"./jsx-runtime-BLchON5X.js";import{R as c}from"./index-DDi9LDaq.js";import{c as h}from"./react-Cb9lVK8B.js";const k="creonow",f={iconBarWidth:48,statusBarHeight:28,sidebar:{min:180,max:400,default:240},panel:{min:280,max:480,default:320},mainMinWidth:400},S=c.createContext(null);function d(e){return`${k}.layout.${e}`}function I(e){let i=null;const p=e.get(d("sidebarWidth"))??f.sidebar.default,o=e.get(d("panelWidth"))??f.panel.default,s=e.get(d("sidebarCollapsed"))??!1,t=e.get(d("panelCollapsed"))??!1;return h((r,a)=>({sidebarWidth:p,panelWidth:o,sidebarCollapsed:s,panelCollapsed:t,zenMode:!1,setSidebarWidth:n=>{r({sidebarWidth:n}),e.set(d("sidebarWidth"),n)},setPanelWidth:n=>{r({panelWidth:n}),e.set(d("panelWidth"),n)},setSidebarCollapsed:n=>{r({sidebarCollapsed:n}),e.set(d("sidebarCollapsed"),n)},setPanelCollapsed:n=>{r({panelCollapsed:n}),e.set(d("panelCollapsed"),n)},setZenMode:n=>{if(n){const u=a();if(u.zenMode)return;i={sidebarCollapsed:u.sidebarCollapsed,panelCollapsed:u.panelCollapsed},r({zenMode:!0,sidebarCollapsed:!0,panelCollapsed:!0});return}const l=a();l.zenMode&&(r({zenMode:!1,sidebarCollapsed:i?.sidebarCollapsed??l.sidebarCollapsed,panelCollapsed:i?.panelCollapsed??l.panelCollapsed}),i=null)},resetSidebarWidth:()=>{r({sidebarWidth:f.sidebar.default}),e.set(d("sidebarWidth"),f.sidebar.default)},resetPanelWidth:()=>{r({panelWidth:f.panel.default}),e.set(d("panelWidth"),f.panel.default)}}))}function P(e){return b.jsx(S.Provider,{value:e.store,children:e.children})}function x(e){const i=c.useContext(S);if(!i)throw new Error("LayoutStoreProvider is missing");return i(e)}P.__docgenInfo={description:"Provide a layout store instance for the Workbench UI.",methods:[],displayName:"LayoutStoreProvider",props:{store:{required:!0,tsType:{name:"ReturnType",elements:[{name:"createLayoutStore"}],raw:"ReturnType<typeof createLayoutStore>"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const E="creonow",C=c.createContext(null);function m(e){return`${E}.theme.${e}`}function y(e){return e==="dark"||e==="light"?e:null}function j(e){const i=e.get(m("mode")),p=y(i)??"dark";return h(o=>({mode:p,setMode:s=>{const t=y(s);t&&(o({mode:t}),e.set(m("mode"),t))}}))}function g(e){return b.jsx(C.Provider,{value:e.store,children:e.children})}function K(e){const i=c.useContext(C);if(!i)throw new Error("ThemeStoreProvider is missing");return i(e)}g.__docgenInfo={description:"Provide a theme store instance for the Workbench UI.",methods:[],displayName:"ThemeStoreProvider",props:{store:{required:!0,tsType:{name:"ReturnType",elements:[{name:"createThemeStore"}],raw:"ReturnType<typeof createThemeStore>"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const v=c.createContext(null);function L(e){async function i(o){return await e.invoke("kg:graph:get",{projectId:o})}function p(){return{code:"INVALID_ARGUMENT",message:"projectId is required"}}return h((o,s)=>({projectId:null,entities:[],relations:[],bootstrapStatus:"idle",lastError:null,clearError:()=>o({lastError:null}),bootstrapForProject:async t=>{const r=s();if(r.bootstrapStatus==="loading"&&r.projectId===t)return;if(!t){o({projectId:null,entities:[],relations:[],bootstrapStatus:"idle",lastError:null});return}o({projectId:t,entities:[],relations:[],bootstrapStatus:"loading",lastError:null});const a=await i(t);if(!a.ok){o({bootstrapStatus:"error",lastError:a.error});return}o({bootstrapStatus:"ready",entities:a.data.entities,relations:a.data.relations,lastError:null})},refresh:async()=>{const t=s();if(!t.projectId)return;const r=await i(t.projectId);if(!r.ok){o({lastError:r.error});return}o({entities:r.data.entities,relations:r.data.relations,lastError:null})},entityCreate:async({name:t,entityType:r,description:a})=>{const n=s();if(!n.projectId){const u=p();return o({lastError:u}),{ok:!1,error:u}}const l=await e.invoke("kg:entity:create",{projectId:n.projectId,name:t,entityType:r,description:a});return l.ok?(s().refresh(),l):(o({lastError:l.error}),l)},entityUpdate:async({entityId:t,patch:r})=>{const a=await e.invoke("kg:entity:update",{entityId:t,patch:r});return a.ok?(s().refresh(),a):(o({lastError:a.error}),a)},entityDelete:async({entityId:t})=>{const r=await e.invoke("kg:entity:delete",{entityId:t});return r.ok?(s().refresh(),r):(o({lastError:r.error}),r)},relationCreate:async({fromEntityId:t,toEntityId:r,relationType:a})=>{const n=s();if(!n.projectId){const u=p();return o({lastError:u}),{ok:!1,error:u}}const l=await e.invoke("kg:relation:create",{projectId:n.projectId,fromEntityId:t,toEntityId:r,relationType:a});return l.ok?(s().refresh(),l):(o({lastError:l.error}),l)},relationUpdate:async({relationId:t,patch:r})=>{const a=await e.invoke("kg:relation:update",{relationId:t,patch:r});return a.ok?(s().refresh(),a):(o({lastError:a.error}),a)},relationDelete:async({relationId:t})=>{const r=await e.invoke("kg:relation:delete",{relationId:t});return r.ok?(s().refresh(),r):(o({lastError:r.error}),r)}}))}function T(e){return c.createElement(v.Provider,{value:e.store},e.children)}function M(e){const i=c.useContext(v);if(!i)throw new Error("KgStoreProvider is missing");return i(e)}T.__docgenInfo={description:"Provide a KG store instance for the Workbench UI.",methods:[],displayName:"KgStoreProvider",props:{store:{required:!0,tsType:{name:"ReturnType",elements:[{name:"createKgStore"}],raw:"ReturnType<typeof createKgStore>"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{T as K,P as L,g as T,L as a,j as b,I as c,f as d,M as e,K as f,x as u};
