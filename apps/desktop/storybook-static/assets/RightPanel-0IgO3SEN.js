import{j as e}from"./jsx-runtime-BLchON5X.js";import{f as w,d as T}from"./kgStore-C8isvze5.js";import{A as W}from"./AiPanel-C6tQ-9T_.js";import{M as D}from"./MemoryPanel-DT_fljws.js";import{R as r}from"./index-DDi9LDaq.js";import{B as g}from"./Button-B9XLIlTV.js";import{H as v}from"./Heading-BzOyC2Oj.js";import{C as S}from"./Card-D2dqmnxE.js";import{D as O}from"./Dialog-DJV5UiAm.js";import{T as o}from"./Text-CW-Kyc9R.js";import{i as x}from"./ipcClient-lUJD4lt8.js";import{I as C}from"./Input-BR80orUP.js";import"./Textarea-C3DI-yW7.js";import"./ListItem-CyD6nTsv.js";import"./Popover-BMinsKFS.js";import"./Select-DBTPtHXT.js";import{C as M}from"./Checkbox-Ddw3urWg.js";import"./Tabs-DmRrGnuH.js";import"./Badge-0PIbcpDO.js";import"./Avatar-CFHo7YSR.js";import"./Spinner-BG3j59Um.js";import"./Skeleton-CwzwMFJo.js";import"./Tooltip-Ca9CUhYJ.js";import"./Toast-HPSiDIc2.js";import"./Accordion-F8I8yqG1.js";import"./Radio-DYZtN_dz.js";function z(s){return new Date(s).toISOString().slice(0,10)}function q(s){const t=Math.max(0,Math.floor(s)),i=Math.floor(t/60),l=t%60;return i>0?`${i}m ${l}s`:`${l}s`}function j(s){return e.jsxs(S,{className:"p-3 rounded-[var(--radius-md)]",children:[e.jsx(o,{size:"tiny",color:"muted",children:s.label}),e.jsx("div",{"data-testid":s.testId,className:"text-xl font-semibold text-[var(--color-fg-default)]",children:s.value})]})}function E(s){const[t,i]=r.useState(null),[l,m]=r.useState(null),[u,p]=r.useState(null),n=r.useCallback(async()=>{p(null);const d=await x("stats:getToday",{});if(!d.ok){p(d.error);return}i(d.data);const h=z(Date.now()),y=z(Date.now()-8640*60*1e3),c=await x("stats:getRange",{from:y,to:h});if(!c.ok){p(c.error);return}m(c.data.summary)},[]);return r.useEffect(()=>{s.open&&n()},[s.open,n]),e.jsx(O,{open:s.open,onOpenChange:s.onOpenChange,title:"Analytics",children:e.jsxs("div",{"data-testid":"analytics-page",className:"flex flex-col gap-3.5",children:[e.jsxs("header",{className:"flex items-baseline gap-2.5",children:[e.jsx(v,{level:"h3",className:"font-extrabold",children:"Statistics"}),e.jsx(g,{variant:"secondary",size:"sm",onClick:()=>{n()},className:"ml-auto",children:"Refresh"})]}),u?e.jsxs(o,{"data-testid":"analytics-error",size:"small",color:"muted",children:[u.code,": ",u.message]}):null,e.jsxs("section",{className:"grid grid-cols-4 gap-2.5",children:[e.jsx(j,{label:"Today words",value:t?t.summary.wordsWritten:0,testId:"analytics-today-words"}),e.jsx(j,{label:"Today time",value:t?q(t.summary.writingSeconds):"0s"}),e.jsx(j,{label:"Today skills",value:t?t.summary.skillsUsed:0,testId:"analytics-today-skills"}),e.jsx(j,{label:"Today docs",value:t?t.summary.documentsCreated:0})]}),e.jsxs(S,{className:"p-3 rounded-[var(--radius-md)]",children:[e.jsx(o,{size:"small",color:"muted",children:"Range (last 7d)"}),e.jsxs("div",{className:"flex gap-3 mt-1.5",children:[e.jsxs(o,{size:"small",children:["words: ",l?.wordsWritten??0]}),e.jsxs(o,{size:"small",children:["skills: ",l?.skillsUsed??0]})]})]})]})})}E.__docgenInfo={description:`AnalyticsPage shows basic writing and usage stats.

Why: P1 requires a minimal, testable surface to validate stats persistence
and IPC query semantics (today + range).`,methods:[],displayName:"AnalyticsPage",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};function P(){const s=w(i=>i.mode),t=w(i=>i.setMode);return e.jsxs("section",{"data-testid":"settings-appearance-section",className:"flex flex-col gap-2.5 p-3 rounded-[var(--radius-lg)] border border-[var(--color-border-default)] bg-[var(--color-bg-raised)]",children:[e.jsx(v,{level:"h4",className:"font-bold",children:"Appearance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{size:"small",color:"muted",children:"Theme"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx(g,{"data-testid":"theme-mode-dark",variant:s==="dark"?"primary":"secondary",size:"sm",onClick:()=>t("dark"),className:s==="dark"?"bg-[var(--color-bg-selected)] text-[var(--color-fg-default)]":"",children:"Dark"}),e.jsx(g,{"data-testid":"theme-mode-light",variant:s==="light"?"primary":"secondary",size:"sm",onClick:()=>t("light"),className:s==="light"?"bg-[var(--color-bg-selected)] text-[var(--color-fg-default)]":"",children:"Light"})]})]})]})}P.__docgenInfo={description:`AppearanceSection controls theme preferences.

Why: theme switching must be persistent and testable (Windows E2E) without
hardcoding colors outside design tokens.`,methods:[],displayName:"AppearanceSection"};function U(s){return s.status==="error"?`error (${s.error.code})`:s.status}function R(){const[s,t]=r.useState(null),[i,l]=r.useState(null),[m,u]=r.useState(!1);r.useEffect(()=>{let n=!1;return(async()=>{const d=await x("judge:model:getState",{});if(!n){if(d.ok){t(d.data.state),l(null);return}l(`${d.error.code}: ${d.error.message}`)}})(),()=>{n=!0}},[]);async function p(){if(!m){u(!0),l(null),t({status:"downloading"});try{const n=await x("judge:model:ensure",{});if(n.ok){t(n.data.state);return}l(`${n.error.code}: ${n.error.message}`),t({status:"error",error:{code:n.error.code,message:n.error.message}})}finally{u(!1)}}}return e.jsxs("section",{"data-testid":"settings-judge-section",className:"p-3 rounded-[var(--radius-lg)] border border-[var(--color-border-default)] bg-[var(--color-bg-raised)]",children:[e.jsx(v,{level:"h4",className:"mb-1.5 font-bold",children:"Judge model"}),e.jsxs(o,{size:"small",color:"muted",as:"div",className:"mb-2.5",children:["Status:"," ",e.jsx(o,{"data-testid":"judge-status",size:"small",color:"default",as:"span",children:s?U(s):"loading"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{"data-testid":"judge-ensure",variant:"secondary",size:"sm",onClick:()=>{p()},disabled:m,loading:m,className:"bg-[var(--color-bg-selected)]",children:"Ensure"}),i?e.jsx(o,{"data-testid":"judge-error",size:"small",color:"muted",children:i}):null]})]})}R.__docgenInfo={description:`JudgeSection is the Settings surface for model readiness.

Why: P0 requires a stable, E2E-testable status + ensure entry without silent failure.`,methods:[],displayName:"JudgeSection"};function A(){const[s,t]=r.useState("idle"),[i,l]=r.useState(null),[m,u]=r.useState(!1),[p,n]=r.useState(""),[d,h]=r.useState(""),[y,c]=r.useState(null),[N,f]=r.useState(null);async function k(){t("loading"),c(null),f(null);const a=await x("ai:proxy:settings:get",{});if(!a.ok){t("idle"),c(`${a.error.code}: ${a.error.message}`);return}t("idle"),l(a.data),u(a.data.enabled),n(a.data.baseUrl)}r.useEffect(()=>{k()},[]);async function $(){c(null),f(null);const a={enabled:m,baseUrl:p};d.trim().length>0&&(a.apiKey=d);const b=await x("ai:proxy:settings:update",{patch:a});if(!b.ok){c(`${b.error.code}: ${b.error.message}`);return}l(b.data),h("")}async function _(){c(null),f(null);const a=await x("ai:proxy:test",{});if(!a.ok){c(`${a.error.code}: ${a.error.message}`);return}if(a.data.ok){f(`ok (${a.data.latencyMs}ms)`);return}f(`${a.data.error?.code??"ERROR"}: ${a.data.error?.message??"failed"} (${a.data.latencyMs}ms)`)}return e.jsxs(S,{"data-testid":"settings-proxy-section",variant:"raised",className:"flex flex-col gap-2.5 p-3 rounded-[var(--radius-lg)]",children:[e.jsx(o,{size:"body",weight:"bold",children:"Proxy"}),e.jsx(M,{"data-testid":"proxy-enabled",checked:m,onCheckedChange:a=>u(a===!0),label:"Enable OpenAI-compatible proxy (LiteLLM)"}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(o,{size:"small",color:"muted",children:"Base URL"}),e.jsx(C,{"data-testid":"proxy-base-url",value:p,onChange:a=>n(a.currentTarget.value),placeholder:"https://your-proxy.example.com",fullWidth:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(o,{size:"small",color:"muted",children:"API key (optional)"}),e.jsx(C,{"data-testid":"proxy-api-key",type:"password",value:d,onChange:a=>h(a.currentTarget.value),placeholder:i?.apiKeyConfigured?"(configured)":"(not configured)",fullWidth:!0})]}),y?e.jsx(o,{size:"small",color:"muted",children:y}):null,N?e.jsxs(o,{size:"small",color:"muted",children:["Test: ",N]}):null,e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{"data-testid":"proxy-save",variant:"secondary",size:"sm",onClick:()=>{$()},disabled:s==="loading",children:"Save"}),e.jsx(g,{"data-testid":"proxy-test",variant:"secondary",size:"sm",onClick:()=>{_()},disabled:s==="loading",children:"Test"}),e.jsx(g,{"data-testid":"proxy-refresh",variant:"secondary",size:"sm",onClick:()=>{k()},disabled:s==="loading",className:"ml-auto",children:"Refresh"})]})]})}A.__docgenInfo={description:`ProxySection controls optional OpenAI-compatible proxy settings.

Why: proxy settings must be managed in the main process (secrets) while still
being user-configurable and E2E-testable.`,methods:[],displayName:"ProxySection"};function I(){const[s,t]=r.useState(!1);return e.jsxs("div",{"data-testid":"settings-panel",className:"flex flex-col gap-3 p-3",children:[e.jsxs("div",{className:"flex items-baseline gap-2.5",children:[e.jsx(v,{level:"h3",className:"font-extrabold",children:"Settings"}),e.jsx(g,{"data-testid":"open-analytics",variant:"secondary",size:"sm",onClick:()=>t(!0),className:"ml-auto",children:"Analytics"})]}),e.jsx(P,{}),e.jsx(A,{}),e.jsx(R,{}),e.jsx(E,{open:s,onOpenChange:t})]})}I.__docgenInfo={description:`SettingsPanel is the minimal Settings surface rendered in the right panel.

Why: P0 requires an always-available, E2E-testable entry point for judge state.`,methods:[],displayName:"SettingsPanel"};function L(s){return s.collapsed?e.jsx("aside",{"data-testid":"layout-panel",className:"hidden w-0"}):e.jsxs("aside",{"data-testid":"layout-panel",className:"flex flex-col bg-[var(--color-bg-surface)] border-l border-[var(--color-separator)]",style:{width:s.width,minWidth:T.panel.min,maxWidth:T.panel.max},children:[e.jsx(I,{}),e.jsx("div",{className:"h-px bg-[var(--color-separator)]"}),e.jsx(D,{}),e.jsx("div",{className:"h-px bg-[var(--color-separator)]"}),e.jsx(W,{})]})}L.__docgenInfo={description:`RightPanel is the right-side panel container (AI/Info). P0 wires visibility
and resizing; feature content comes in later task cards.

Design spec ยง5.3: Right panel default width 320px, min 240px, max 600px.`,methods:[],displayName:"RightPanel",props:{width:{required:!0,tsType:{name:"number"},description:""},collapsed:{required:!0,tsType:{name:"boolean"},description:""}}};export{L as R};
