import{j as s}from"./jsx-runtime-BLchON5X.js";import{B as c}from"./Button-B9XLIlTV.js";import{C as n}from"./Card-D2dqmnxE.js";import{I as x}from"./Input-BR80orUP.js";import{T as r}from"./Text-CW-Kyc9R.js";import{u as v}from"./fileStore-6FVttjBc.js";import{u as t}from"./searchStore-Du6yRHsb.js";function j(o){const d=t(e=>e.query),l=t(e=>e.items),i=t(e=>e.status),a=t(e=>e.lastError),u=t(e=>e.setQuery),m=t(e=>e.runFulltext),h=t(e=>e.clearError),p=v(e=>e.setCurrent);function f(e){e.preventDefault(),m({projectId:o.projectId,limit:20})}return s.jsxs("section",{"data-testid":"search-panel",className:"flex flex-col gap-3 p-3 min-h-0",children:[s.jsxs("header",{className:"flex items-center gap-2",children:[s.jsx(r,{size:"small",color:"muted",children:"Search"}),s.jsx(r,{size:"tiny",color:"muted",className:"ml-auto",children:i})]}),a?s.jsxs(n,{className:"p-2.5 rounded-[var(--radius-md)]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(r,{"data-testid":"search-error-code",size:"code",color:"muted",children:a.code}),s.jsx(c,{variant:"ghost",size:"sm",onClick:h,className:"ml-auto",children:"Dismiss"})]}),s.jsx(r,{size:"small",color:"muted",as:"div",className:"mt-1.5",children:a.message})]}):null,s.jsxs("form",{onSubmit:f,className:"flex gap-2",children:[s.jsx(x,{"data-testid":"search-input",value:d,onChange:e=>u(e.target.value),placeholder:"Search documentsâ€¦",className:"flex-1"}),s.jsx(c,{"data-testid":"search-run",type:"submit",variant:"secondary",size:"sm",disabled:i==="loading",children:"Go"})]}),s.jsx(n,{className:"p-2.5 rounded-[var(--radius-md)] min-h-0 overflow-auto flex flex-col gap-2.5",children:l.length===0?s.jsx(r,{size:"small",color:"muted",children:"(no results)"}):l.map(e=>s.jsxs("button",{type:"button",onClick:()=>{p({projectId:o.projectId,documentId:e.documentId})},className:"text-left border border-[var(--color-border-default)] rounded-[var(--radius-md)] p-2.5 bg-transparent hover:bg-[var(--color-bg-hover)] active:bg-[var(--color-bg-active)] transition-colors duration-[var(--duration-fast)] ease-[var(--ease-default)] focus-visible:outline focus-visible:outline-[length:var(--ring-focus-width)] focus-visible:outline-offset-[-2px] focus-visible:outline-[var(--color-ring-focus)]",children:[s.jsx(r,{size:"small",as:"div",className:"overflow-hidden text-ellipsis whitespace-nowrap",title:e.title,children:e.title}),s.jsx(r,{size:"code",color:"muted",as:"div",className:"mt-1.5 whitespace-pre-wrap break-words",children:e.snippet})]},e.documentId))})]})}j.__docgenInfo={description:`SearchPanel is the minimal UI surface for full-text search (FTS).

Why: CNWB-REQ-100 requires a usable search entry point and deterministic
errors that do not block the Workbench.`,methods:[],displayName:"SearchPanel",props:{projectId:{required:!0,tsType:{name:"string"},description:""}}};export{j as S};
