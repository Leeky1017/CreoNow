import{j as u}from"./jsx-runtime-BLchON5X.js";import{R as c}from"./index-DDi9LDaq.js";import{c as l}from"./react-Cb9lVK8B.js";const i=c.createContext(null);function f(e){return l((r,n)=>({current:null,items:[],bootstrapStatus:"idle",lastError:null,clearError:()=>r({lastError:null}),bootstrap:async()=>{if(n().bootstrapStatus==="loading")return;r({bootstrapStatus:"loading",lastError:null});const t=await e.invoke("project:getCurrent",{}),o=t.ok?t.data:(t.error.code==="NOT_FOUND",null);if(!t.ok&&t.error.code!=="NOT_FOUND"){r({bootstrapStatus:"error",lastError:t.error});return}const a=await e.invoke("project:list",{includeDeleted:!1});if(!a.ok){r({bootstrapStatus:"error",lastError:a.error,current:o});return}r({bootstrapStatus:"ready",current:o,items:a.data.items,lastError:null})},createAndSetCurrent:async({name:s})=>{const t=await e.invoke("project:create",{name:s});if(!t.ok)return r({lastError:t.error}),t;const o=await e.invoke("project:setCurrent",{projectId:t.data.projectId});return o.ok?(r({current:o.data,lastError:null}),n().bootstrap(),o):(r({lastError:o.error}),o)}}))}function d(e){return u.jsx(i.Provider,{value:e.store,children:e.children})}function S(e){const r=c.useContext(i);if(!r)throw new Error("ProjectStoreProvider is missing");return r(e)}d.__docgenInfo={description:"Provide a project store instance for the Workbench UI.",methods:[],displayName:"ProjectStoreProvider",props:{store:{required:!0,tsType:{name:"ReturnType",elements:[{name:"createProjectStore"}],raw:"ReturnType<typeof createProjectStore>"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{d as P,f as c,S as u};
