import{j as t}from"./jsx-runtime-BLchON5X.js";import{R as i}from"./index-DDi9LDaq.js";import{B as d}from"./Button-B9XLIlTV.js";import{D as h}from"./Dialog-DJV5UiAm.js";import{I as C}from"./Input-BR80orUP.js";import{T as p}from"./Text-CW-Kyc9R.js";import{u as s}from"./projectStore-wjKW615C.js";function b(r){const f=s(e=>e.createAndSetCurrent),c=s(e=>e.clearError),a=s(e=>e.lastError),[l,m]=i.useState(""),[n,o]=i.useState(!1),u="create-project-form";i.useEffect(()=>{r.open||(m(""),o(!1),c())},[c,r.open]);async function g(e){if(e.preventDefault(),n)return;o(!0);const j=await f({name:l});o(!1),j.ok&&r.onOpenChange(!1)}return t.jsx(h,{open:r.open,onOpenChange:r.onOpenChange,title:"Create project",description:"Creates a local project under your app profile.",footer:t.jsxs(t.Fragment,{children:[t.jsx(d,{variant:"ghost",size:"sm",onClick:()=>r.onOpenChange(!1),children:"Cancel"}),t.jsx(d,{"data-testid":"create-project-submit",variant:"primary",size:"sm",loading:n,type:"submit",form:u,children:n?"Creatingâ€¦":"Create"})]}),children:t.jsxs("form",{id:u,"data-testid":"create-project-dialog",onSubmit:e=>{g(e)},children:[t.jsx("label",{className:"block mb-2",children:t.jsx(p,{size:"small",color:"muted",children:"Name (optional)"})}),t.jsx(C,{"data-testid":"create-project-name",value:l,onChange:e=>m(e.target.value),autoFocus:!0,placeholder:"Untitled",fullWidth:!0,className:"mb-4"}),a?t.jsxs(p,{size:"small",color:"muted",as:"div",className:"mb-4",children:[a.code,": ",a.message]}):null]})})}b.__docgenInfo={description:`Minimal create project dialog (P0).

Why: provides a stable E2E entry point for creating and setting current
project, without relying on native OS dialogs.`,methods:[],displayName:"CreateProjectDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(next: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"next"}],return:{name:"void"}}},description:""}}};export{b as C};
